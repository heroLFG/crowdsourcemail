<!doctype html>
<html lang="en">
    <head>
        <title>Cognitive Outsourcing Project</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="main-nav"></div>
        <div class="app bg-dark"></div>

        <script src="//{{ host }}/static/dist/app.bundle.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/moment@2.29.1/moment.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

        <!-- https://github.com/google/google-api-javascript-client/blob/master/samples/authSample.html -->
        <script type="text/javascript">
            const apiKey = '{{ google_api_key }}';
            const discoveryDocs = ["https://gmail.googleapis.com/$discovery/rest?version=v1"];
            const clientId = '{{ google_client_id }}';
            const scopes = 'https://www.googleapis.com/auth/gmail.modify';

            // var authorizeButton = document.getElementById('authorize-button');
            // var signoutButton = document.getElementById('signout-button');

            function handleClientLoad() {
              gapi.load('client:auth2', initClient);
            }

            function initClient() {
              gapi.client.init({
                  apiKey: apiKey,
                  discoveryDocs: discoveryDocs,
                  clientId: clientId,
                  scope: scopes
              }).then(function (result) {
                  console.log('gapi init done', result);
                // Listen for sign-in state changes.
                // gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);
      
                // Handle the initial sign-in state.
                // updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
      
                // authorizeButton.onclick = handleAuthClick;
                // signoutButton.onclick = handleSignoutClick;
              });
            }

            // function updateSigninStatus(isSignedIn) {
            //   if (isSignedIn) {
            //     authorizeButton.style.display = 'none';
            //     signoutButton.style.display = 'block';
            //     makeApiCall();
            //   } else {
            //     authorizeButton.style.display = 'block';
            //     signoutButton.style.display = 'none';
            //   }
            // }

            // function handleAuthClick(event) {
            //   gapi.auth2.getAuthInstance().signIn();
            // }

            // function handleSignoutClick(event) {
            //   gapi.auth2.getAuthInstance().signOut();
            // }

            // Load the API and make an API call.  Display the results on the screen.
            // function makeApiCall() {
            //   gapi.client.people.people.get({
            //     'resourceName': 'people/me',
            //     'requestMask.includeField': 'person.names'
            //   }).then(function(resp) {
            //     var p = document.createElement('p');
            //     var name = resp.result.names[0].givenName;
            //     p.appendChild(document.createTextNode('Hello, '+name+'!'));
            //     document.getElementById('content').appendChild(p);
            //   });
            // }
          </script>
          <script async defer src="https://apis.google.com/js/api.js" 
            onload="this.onload=function(){};handleClientLoad()" 
            onreadystatechange="if (this.readyState === 'complete') this.onload()">
          </script>
    </body>
</html>
